var require,define;(function(){function c(d){var e=b[d];if(e)return e;if(!a[d])throw new Error("Module "+d+" not found");var f=a[d],g=f.deps||(f.length?["require","exports","module"]:[]),h=b[d]={};for(var i=0;i<g.length;i++){var j=g[i];switch(j){case"require":j=function(a){if(a.charAt(0)==="."){a=d.substring(0,d.lastIndexOf("/")+1)+a;while(b!==a){var b=a;a=a.replace(/\/[^\/]*\/\.\.\//,"/")}a=a.replace(/\/\.\//g,"/")}return c(a)};break;case"exports":j=h;break;case"module":var e=j={exports:h};break;default:j=c(j)}g[i]=j}h=f.apply(this,g),e&&e.exports!=b[d]&&(h=e.exports);if(h)return b[d]=h;return b[d]}var a={},b={};require=function(a,b){var d=[];for(var e=0;e<a.length;e++)d.push(c(a[e]));b.apply(c,d)},define=require.def=function(b,c,d){typeof c=="function"?a[b]=c:(a[b]=d).deps=c}})(),define("lingwo/require-stubs",function(){}),define("lingwo/util/extendPrototype",[],function(){return function(a,b){for(var c in b)a.prototype[c]=b[c]}}),define("lingwo/util/declare",["lingwo/util/extendPrototype"],function(a){return function(b){var c=b._constructor;delete b._constructor,a(c,b);return c}}),define("lingwo/Entry",["lingwo/util/declare"],function(a){var b=a({_constructor:function(a){a=a||{},this.language=a.language,this.headword=a.headword,this.pos=a.pos,this.like=a.like||null,this.fields=a.fields||{},this.field_alternatives=a.field_alternatives||{},this.sources=a.sources||null,this.clearCache()},copyFrom:function(a){this.senses=a.senses,this.translations=a.translations,this.pron=a.pron,this.like=a.like,this.fields=a.fields,this.field_alternatives=a.field_alternatives,this.clearCache()},clone:function(){var a=new b({language:this.language,headword:this.headword,pos:this.pos});a.copyFrom(this),a.sources=this.sources;return a},clearCache:function(){this._cachedFields={},this._cachedWords={}},getFieldsPos:function(){return this.like||this.pos},getFields:function(){var a=this.getFieldsPos(),b={},c,d;if(typeof this.language.fields[a]!="undefined")for(c in this.language.fields[a])d=this.language.fields[a][c],b[c]={type:d.type,value:this.getField(c),automatic:this.isAutomatic(c)},typeof this.field_alternatives[c]!="undefined"&&(b[c].alt=this.field_alternatives[c]);return b},isAutomatic:function(a){return typeof this.fields[a]==="undefined"},getFieldInfo:function(a){var c=this.getFieldsPos();if(typeof this.language.fields[c]=="undefined"||typeof this.language.fields[c][a]=="undefined")throw new b.errors.NoSuchField(a,c);return this.language.fields[c][a]},getField:function(a){var b,c=null,d;if(typeof this.fields[a]!="undefined")return this.fields[a];if(typeof this._cachedFields[a]!="undefined")return this._cachedFields[a];b=this.getFieldInfo(a),b.automatic&&(c=b.automatic.apply(this.language,Array(this)));if(b.type=="form"){c=this._handleFormValue(c);for(d=0;d<c.length;d++)if(!(c[d]instanceof this.language.Word)){print(c[d]);throw"Value returned from automatic function '"+a+"' is not a Word!"}this._cachedWords[a]=c,c=this._wordsToString(c)}else b.type=="class"?c=!!c:b.type=="option"&&(c=c.toString());this._cachedFields[a]=c;return c},setField:function(a,b){this.fields[a]=b,this.clearCache()},getFieldAlternatives:function(a){if(typeof this.field_alternatives[a]==="undefined")return[];return this.field_alternatives[a]},setFieldAlternatives:function(a,b){this.field_alternatives[a]=b},addFieldAlternative:function(a,b){var c=this.getFieldAlternatives(a);c.push(b),this.setFieldAlternatives(a,c)},_handleFormValue:function(a){var b;a===null&&(a=new this.language.Word),a instanceof Array||(a=[a],b=this.getWords(),b.length>1&&(a=a.concat(b.slice(1))));return a},_parseWords:function(a){var b=a.split(" "),c;for(c=0;c<b.length;c++)b[c]=this.language.parseWord(b[c]);return b},_wordsToString:function(a){var b=[],c;for(c=0;c<a.length;c++)b.push(a[c].toString());return b.join(" ")},getWords:function(a){typeof a=="undefined"&&(a="");if(typeof this._cachedWords[a]!="undefined")return this._cachedWords[a];a==""?this._cachedWords[a]=this._parseWords(this.headword):typeof this.fields[a]!="undefined"?this._cachedWords[a]=this._parseWords(this.fields[a]):this.getField(a);return this._cachedWords[a]},getWord:function(a){return this.getWords(a)[0]},setSource:function(a,b){this.sources===null&&(this.sources={}),this.sources[a]=b},getSource:function(a){if(this.sources===null)return undefined;return this.sources[a]}});b.errors={NoSuchField:function(a,b){this.name=a,this.pos=b,this.toString=function(){var a="No such field '"+this.name+"'";this.pos&&(a+=" for pos '"+this.pos+"'");return a}}};return b}),define("lingwo/Language",["lingwo/util/extendPrototype"],function(a){function g(a){a.Word=f(a),a.fields={}}var b=function(){g(this)};b.languages={};var c=function(a,b){return function(c){var d=function(){a.apply(this,arguments)};for(var e in b)d.prototype[e]=b[e];d.prototype.lang=c,b.toString!=Object.prototype.toString&&(d.prototype.toString=b.toString),b.valueOf!=Object.prototype.toString&&(d.prototype.valueOf=b.valueOf),d.extend=function(a){for(var b in a)this.prototype[b]=a[b]};return d}},d=function(a,b,c,d){a.splice.apply(a,[b,c].concat(d))},e=function(a,b,c){this.word=a,this.wordcls=a.lang.Word,this.start=typeof b=="undefined"?-1:b,this.len=c||0};a(e,{drop:function(){if(this.start==-1)return!1;var a=this.word.clone();a.letters.splice(this.start,this.len);return a},replace:function(a){if(this.start==-1)return!1;var b=this.word.lang.parseWord(a),c=this.word.clone();d(c.letters,this.start,this.len,b.letters);return c},append:function(a){if(this.start==-1)return!1;var b=this.word.lang.parseWord(a),c=this.word.clone();d(c.letters,this.start+this.len,0,b.letters);return c},result:function(a){if(this.start==-1)return!1;return a},bool:function(){return this.start!=-1},toWord:function(){return new this.wordcls(this.word.letters.slice(this.start,this.start+this.len))}});var f=c(function(a){this.letters=a||[]},{clone:function(){return new this.lang.Word(this.letters.slice(0))},append:function(a){var b=this.clone(),c=this.lang.parseWord(a);d(b.letters,b.letters.length,0,c.letters);return b},concat:function(a){return new this.lang.Word(this.letters.concat(a.letters))},toString:function(){var a=[];for(var b=0;b<this.letters.length;b++){var c=this.letters[b],d=this.lang.alphabet[c[0]];a.push(d.forms[c[1]])}return a.join("")},valueOf:function(){return this.toString()},_parseSpec:function(a){if(typeof a=="string")return this.lang.parseWord(a).letters;if(typeof a=="object"){if(typeof a.length=="number")return a;return[a]}throw"Bad spec error"},_compLetter:function(a,b){switch(b.spec){case"cls":return this.lang.letterHasClass(a[0],b.value);default:return a[0]==b[0]}},ending:function(){if(arguments.length==1&&typeof arguments[0]=="number"){var a=arguments[0];if(a<=this.letters.length)return new e(this,this.letters.length-a,a)}else checki:for(var b=0;b<arguments.length;b++){var c=this._parseSpec(arguments[b]);if(c.length>this.letters.length)continue checki;for(var d=0;d<c.length;d++)if(!this._compLetter(this.letters[this.letters.length-d-1],c[c.length-d-1]))continue checki;return new e(this,this.letters.length-c.length,c.length)}return new e(this)},hasEnding:function(){return this.ending.apply(this,arguments).bool()},endingOrFalse:function(){var a=this.ending.apply(this,arguments);if(a.bool())return a;return!1}});a(b,{alphabet:null,letterHasClass:function(a,b){var c=this.alphabet[a];for(var d=0;d<c.classes.length;d++)if(c.classes[d]==b)return!0;return!1},parseLetter:function(a){if(!this.alphabet)throw"Cannot parseLetter() without a defined alphabet";var b,c;for(b in this.alphabet){var d=this.alphabet[b];for(c in d.forms)if(d.forms[c]==a)return[b,c]}return null},parseWord:function(a){if(!this.alphabet)throw"Cannot parseWord() without a defined alphabet";var b=0,c=a.length,d=[];while(c>0){b=0;while(b<=c){var e=a.substring(b,c),f=this.parseLetter(e);if(f!==null){d.push(f),c-=e.length;break}b++}if(b>c){console&&console.debug&&console.debug("nothing was found");return null}}d.reverse();return new this.Word(d)}}),b.cls=function(a){return{spec:"cls",value:a}},b.defineLanguage=function(a){var c=new b;c.name=a,b.languages[a]=c;return c},b.generateAlphabet=function(a,b,c){c=c||function(){return[]};var d={},e,f=function(a){d[a]={classes:c(a),default_form:"lower",forms:{lower:a,upper:a.substr(0,1).toUpperCase()+a.substr(1)}}};for(e=0;e<a.length;e++)f(a.substr(e,1));for(e=0;e<b.length;e++)f(b[e]);return d};return b})